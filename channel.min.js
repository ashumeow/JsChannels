(function(b,c){function a(r){var o=this,d=[],l=[],f=-1,m=null,k=false,h={},n;r=typeof r==="object"?r:{};for(n in h){if(typeof r[n]==="undefined"||r[n===null]){r[n]=h[n]}}function i(){if(!k&&d.length>0){f=-1;m=d.shift();q.apply(this)}}function q(){if(++f>=l.length||m===null){f=-1;m=null;i();return}l[f].apply(this,m);if(!k){q()}}this.read=function e(s){l.push(s);i();return o};this.unread=function e(t){var u=-1,s=l.length;while(++u<s){if(l[u]===t){l.splice(u,1);break}}return o};this.block=function g(){if(!k){k=true;return true}return false};this.unblock=function j(){if(k){k=false;q();return true}return false};this.write=function p(){if(l.length===0||d.length>0||k){d.push(arguments)}else{m=arguments;q.apply(o)}return o}}a.alts=function(e){var g=Array.prototype.splice.call(arguments,1),h=-1,d=g.length,j;function f(){var i=Array.prototype.slice.call(arguments,0),k=i.shift();return function(){var l=Array.prototype.slice.call(arguments,0);return k.apply(this,i.concat(l))}}while(++h<d){j=g[h];j.read(f(e,j))}};a.select=function(e){var f=Array.prototype.splice.call(arguments,1),h=-1,d=f.length,k,g=[];function j(l,m){return function i(){var o=-1,n=f.length;console.log("J is "+o);while(++o<n){f[o].unread(g[o])}return m.apply(this,arguments)}}while(++h<d){k=f[h];g.push(j(k,e));k.read(g[h])}};b.Channel=a}(this));