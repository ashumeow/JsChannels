(function(b,c){function a(r){var o=this,d=[],l=[],f=-1,m=null,k=false,h={};r=typeof r==="object"?r:{};for(var n in h){if(typeof r[n]==="undefined"||r[n===null]){r[n]=h[n]}}function i(){if(!k&&d.length>0){f=-1;m=d.shift();q.apply(this)}}function q(){if(++f>=l.length||m===null){f=-1;m=null;i.apply(this);return}l[f].apply(this,m);if(!k){q.apply(this)}}this.read=function e(s){l.push(s);i.apply(this);return o};this.unread=function e(t){var u=-1,s=l.length;while(++u<s){if(l[u]===t){l.splice(u,1);break}}return o};this.block=function g(){if(!k){k=true;return true}return false};this.unblock=function j(){if(k){k=false;q.apply(this);return true}return false};this.write=function p(){if(l.length===0||d.length>0||k||f>=0){d.push(arguments)}else{m=arguments;q.apply(this)}return o}}a.alts=function(e){var f=Array.prototype.splice.call(arguments,1),g=-1,d=f.length,h;while(++g<d){h=f[g];h.read(e.bind(this,h))}};a.select=function(e){var f=Array.prototype.splice.call(arguments,1),h=-1,d=f.length,k,g=[];function j(l,m){return function i(p){var o=-1,n=f.length;while(++o<n){f[o].unread(g[o])}return m.apply(p,arguments)}.bind(this,l)}while(++h<d){k=f[h];g.push(j(k,e));k.read(g[h])}};b.Channel=a}(this));